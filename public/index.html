<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="icon" href="<%= BASE_URL %>favicon.ico" />
    <title><%= htmlWebpackPlugin.options.title %></title>

    <!-- Firebase SDK (Utilizando Módulos ES) -->
    <script type="module">
      // Importar as funções necessárias do Firebase
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
      import { getAuth } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
      // Importe outros serviços do Firebase que sejam necessários

      // Configuração do Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyBubRqySf26h_LaTJGfwZlDHVxJXFJTz9A",
        authDomain: "eleicoesvirtual.firebaseapp.com",
        projectId: "eleicoesvirtual",
        storageBucket: "eleicoesvirtual.appspot.com",
        messagingSenderId: "739485088609",
        appId: "1:739485088609:web:d31f97dc972e62ba202320",
        measurementId: "G-TCY2FJ5J70",
      };

      // Inicializar o Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      // Tornar o Firebase disponível globalmente se necessário
      window.firebaseApp = app;
      window.firebaseAuth = auth;
      window.firebaseDb = db;

      console.log("Firebase foi inicializado");
    </script>

    <style media="screen">
      body {
        background: #eceff1;
        color: rgba(0, 0, 0, 0.87);
        font-family: Roboto, Helvetica, Arial, sans-serif;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <noscript>
      <strong>
        We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work
        properly without JavaScript enabled. Please enable it to continue.
      </strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->

    <script>
      // Agora o Firebase já foi carregado pelo script acima
      document.addEventListener("DOMContentLoaded", function () {
        try {
          // Usar a variável firebaseApp para acessar a instância do Firebase
          let app = window.firebaseApp;
          let features = ["auth", "firestore"].filter(
            (feature) => typeof app[feature] === "function"
          );
          console.log(`Firebase SDK loaded with ${features.join(", ")}`);
        } catch (e) {
          console.error("Error loading Firebase SDK:", e);
        }
      });
    </script>
  </body>
</html>
